<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Visita Turística</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nueva_visita.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/empresas.css') }}">
</head>
<body>
    <div class="header">
        <h1>✏️ Modificar Visita Turística</h1>
        <p>Edite los datos de la visita: <strong>{{ visita.nombre_institucion }}</strong></p>
    </div>

    <div class="container">
        <!-- Información del proceso -->
        <div class="section">
            <div class="info-panel">
                <div class="info-item">
                    <strong>📝 Modificando:</strong> 
                    Los cambios se guardarán al presionar "Actualizar Visita".
                </div>
                <div class="info-item">
                    <strong>📅 Estado actual:</strong> 
                    Esta visita está en estado <strong>{{ visita.estado }}</strong>.
                </div>
            </div>
        </div>

        <form action="/modificar_visita/{{ visita.id }}" method="POST" class="form-solicitud">
            <!-- A. DATOS DE LA INSTITUCIÓN -->
            <div class="section">
                <h2>A. Datos de la Institución</h2>
                <div class="form-group">
                    <label for="nombre_institucion">Nombre completo de la institución educativa:</label>
                    <input type="text" id="nombre_institucion" name="nombre_institucion" value="{{ visita.nombre_institucion }}" required>
                </div>
                <div class="form-group">
                    <label for="localidad">Localidad:</label>
                    <input type="text" id="localidad" name="localidad" value="Esperanza" required>
                </div>
                
                <!-- Tipo de institución -->
                <div class="form-group">
                    <label for="tipo_institucion">Tipo de institución:</label>
                    <select id="tipo_institucion" name="tipo_institucion" required>
                        <option value="">Seleccione una opción</option>
                        <option value="local">Institución Local (Esperanza)</option>
                        <option value="externa">Institución Externa (Turismo Educativo)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="director">Nombre del Director/a:</label>
                    <input type="text" id="director" name="director" value="{{ visita.responsable }}" required>
                </div>
                <div class="form-group">
                    <label for="correo_institucional">Correo Electrónico Institucional:</label>
                    <input type="email" id="correo_institucional" name="correo_institucional" value="{{ visita.email }}" required>
                </div>
                <div class="form-group">
                    <label for="telefono_institucion">Teléfono de la Institución:</label>
                    <input type="tel" id="telefono_institucion" name="telefono_institucion" value="{{ visita.telefono }}" required>
                </div>
            </div>

            <!-- B. DATOS DEL CONTINGENTE -->
            <div class="section">
                <h2>B. Datos del Contingente</h2>
                <div class="form-group">
                    <label for="contacto_principal">Nombre del Contacto Principal:</label>
                    <input type="text" id="contacto_principal" name="contacto_principal" value="{{ visita.responsable }}" required>
                </div>
                <div class="form-group">
                    <label for="telefono_contacto_principal">Teléfono del Contacto Principal:</label>
                    <input type="tel" id="telefono_contacto_principal" name="telefono_contacto_principal" value="{{ visita.telefono }}" required>
                </div>
                <div class="form-group">
                    <label for="relacion_contacto">Relación del Contacto con el Grupo:</label>
                    <input type="text" id="relacion_contacto" name="relacion_contacto" value="Profesor/a" required>
                </div>
                <div class="form-group">
                    <label for="contacto_suplente">Nombre del Contacto Suplente:</label>
                    <input type="text" id="contacto_suplente" name="contacto_suplente" value="">
                </div>
                <div class="form-group">
                    <label for="telefono_contacto_suplente">Teléfono del Contacto Suplente:</label>
                    <input type="tel" id="telefono_contacto_suplente" name="telefono_contacto_suplente" value="">
                </div>
                <div class="form-group">
                    <label for="nivel_educativo">Nivel Educativo:</label>
                    <select id="nivel_educativo" name="nivel_educativo" required>
                        <option value="">Seleccione una opción</option>
                        <option value="primario">Primario</option>
                        <option value="secundario">Secundario</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cantidad_alumnos">Cantidad de Alumnos:</label>
                    <input type="number" id="cantidad_alumnos" name="cantidad_alumnos" value="{{ visita.cantidad_alumnos }}" required>
                </div>
                <div class="form-group">
                    <label for="edad_alumnos">Edad de los Alumnos:</label>
                    <input type="text" id="edad_alumnos" name="edad_alumnos" value="{{ visita.edad_alumnos }}" required>
                </div>
                
                <div class="form-group">
                    <label>¿Hay alumnos con discapacidad?</label>
                    <div class="radio-group">
                        <input type="radio" id="discapacidad_si" name="discapacidad" value="Sí" {% if visita.discapacidad == 'Sí' %}checked{% endif %} required>
                        <label for="discapacidad_si">Sí</label>
                        <input type="radio" id="discapacidad_no" name="discapacidad" value="No" {% if visita.discapacidad == 'No' %}checked{% endif %} required>
                        <label for="discapacidad_no">No</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tipo_discapacidad">Si seleccionó "Sí", especifique el tipo de discapacidad:</label>
                    <input type="text" id="tipo_discapacidad" name="tipo_discapacidad" value="">
                </div>
                
                <div class="form-group">
                    <label>¿Requiere adaptación especial?</label>
                    <div class="radio-group">
                        <input type="radio" id="adaptacion_si" name="adaptacion" value="Sí">
                        <label for="adaptacion_si">Sí</label>
                        <input type="radio" id="adaptacion_no" name="adaptacion" value="No">
                        <label for="adaptacion_no">No</label>
                    </div>
                </div>
            </div>

            <!-- C. SELECCIÓN DE EMPRESAS -->
            <div class="section">
                <h2>C. Selección de Empresas/Lugares</h2>
                <div class="form-group">
                    <label for="lugares">Empresas seleccionadas:</label>
                    <input type="text" id="lugares" name="lugares[]" value="{{ visita.empresas_seleccionadas }}" placeholder="Lista de empresas separadas por comas">
                </div>
            </div>

            <!-- D. DATOS DE LA VISITA -->
            <div class="section">
                <h2>D. Datos de la Visita</h2>
                <div class="form-group">
                    <label for="fecha_visita">Fecha Propuesta para la Visita:</label>
                    <input type="date" id="fecha_visita" name="fecha_visita" value="{{ visita.fecha_visita }}" required>
                </div>
                <div class="form-group">
                    <label for="hora_grupo1">Hora Grupo 1:</label>
                    <input type="time" id="hora_grupo1" name="hora_grupo1" value="{% if visita.hora_grupo1 %}{{ visita.hora_grupo1.strftime('%H:%M') }}{% endif %}">
                </div>
                <div class="form-group">
                    <label for="hora_grupo2">Hora Grupo 2:</label>
                    <input type="time" id="hora_grupo2" name="hora_grupo2" value="{% if visita.hora_grupo2 %}{{ visita.hora_grupo2.strftime('%H:%M') }}{% endif %}">
                </div>
                <div class="form-group">
                    <label for="observaciones">Observaciones:</label>
                    <textarea id="observaciones" name="observaciones" rows="4" placeholder="Observaciones adicionales...">{{ visita.observaciones or '' }}</textarea>
                </div>
            </div>

            <!-- Botón para enviar -->
            <div class="section">
                <div class="button-group">
                    <button type="submit" class="btn-primary">Actualizar Visita</button>
                    <a href="{{ url_for('consultar_visitas') }}" class="btn-secondary">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</body>
</html>
